parameters:
- name: azureServiceConnection
  type: string
  default: false

steps:
  - script: |
        echo "Inner value: ${{ parameters.azureServiceConnection }}"
    displayName: Inner Echo
    
  - script: |
        echo "Inner value: ${{ variables.service_connection_name }}"
    displayName: Inner Echo 2
    
  - script: |
        echo "Inner value: ${{ variables.blah }}"
    displayName: Inner Echo 3

  - task: AzureCLI@2
    displayName: Nested Template Step
    inputs:
    #   azureSubscription: $(service_connection_name)
    #   azureSubscription: "My Azure Connection XYZ"
    #   azureSubscription: "${{ variables.service_connection_name }}"
    #   azureSubscription: "${{ parameters.azureServiceConnection }}"
      azureSubscription: "${{ variables.blah }}"
      addSpnToEnvironment: true
      scriptType: bash
      scriptLocation: inlineScript
      inlineScript: |
        echo Here we go: ${{ parameters.azureServiceConnection }}
